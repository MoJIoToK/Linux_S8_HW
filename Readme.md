# Операционные системы и виртуализация (Linux)
## Скрипты Bash

### Задание
___ 
Написать скрипт очистки директорий. На вход принимает путь к директории. Если директория существует, то удаляет в ней все файлы с расширениями .bak, .tmp, .backup. Если директории нет, то выводит ошибку.

*Создать скрипт ownersort.sh, который в заданной папке копирует файлы в директории, названные по имени владельца каждого файла. Учтите, что файл должен принадлежать соответствующему владельцу.

Результат:
Код скриптов в текстовом виде (каждый скрипт в отдельном файле). Кодировка файлов 
UTF-8.

### Решение
___
#### 1. Скрипт очистки директории

[Ссылка на скрипт](https://github.com/MoJIoToK/Linux_S8_HW/blob/main/delete_script "Нажимайте, не бойтесь")

Создаём и переходим в директорию (S8_HW), которую в последствии будем очищать:
``` 
mkdir S8_HW
cd S8_HW
```

В ней создаём файл содержащий скрипт:
```
cat > delete_script
```
Создать скрипт можно и с помощью текстового редактора nano. 
Внутри файла запишем следующий скрипт:
```
#!/bin/bash

read -p "Введите путь к очищаемой директории: " DELDIR

if [ -e $DELDIR ]
	then
		echo 'Указанная директория найдена'
		cd $DELDIR
		echo 'Процесс удаления'
		rm -v *.bak *.tmp *.backup
		echo 'Директория очищена'
	else
		echo 'Указанная директория не найдена! Выполнение скрипта остановлено'
		exit 2
fi
```

Чтобы проверить работоспособность скрипта запустим bash, командой:
```
bash delete_script
```

#### 2. Скрипт ownersort.sh
[Ссылка на скрипт](https://github.com/MoJIoToK/Linux_S8_HW/blob/main/ownersort "Нажми!")

Для того чтобы выполнить задание необходимо сначала в директории создать папки с именами всех владельцев файлов, проверить и убрать все повторения:
```
#!/bin/bash

dir=$(ls -l | tr -s ' ' '\t' | cut -f '3' | sort -u)
for i in $dir; 
do
	mkdir -p $i
done
```
Затем необходимо считать влдельца и название файлов. Попутно проверяем, что исследуемый объект является файлом, а не директорией. Если проверка пройдена, то файл перемещается в директорию с именем владельца:
```
dirfile=$(ls -l | tr -s ' ' '\t' | cut -f '3 9')
count=0
for i in $dirfile;
do
	count=$((count+1))
		if (($count%2))
			then
				dir=$i
				echo $dir = $i zero
			else
				if [ -f ./$i ]
					then
						cp ./$i ./$dir/$i
				fi
		fi
done
```